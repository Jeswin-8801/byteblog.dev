<!DOCTYPE html>

<app-alert-modal
  [alertModal]="alertModal"
  [isClosed]="isAlertModalClosed"
></app-alert-modal>

<section class="bg-gray-900">
  <div
    class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"
  >
    <a
      href="#"
      class="flex items-center mb-6 text-2xl font-semibold text-white"
    >
      <img class="w-8 h-8 mr-2" src="byteblog.svg" alt="logo" />
      Byteblog
    </a>
    <div
      class="w-full p-6 rounded-lg shadow border md:mt-0 sm:max-w-md bg-gray-800 border-gray-700 sm:p-8"
    >
      <h2
        class="mb-1 text-xl font-bold leading-tight tracking-tight md:text-2xl text-white"
      >
        Change Password
      </h2>
      <form
        class="mt-4 space-y-4 lg:mt-5 md:space-y-5"
        [formGroup]="passwordResetForm"
        (ngSubmit)="onPasswordResetFormSubmit()"
      >
        <div>
          <label
            for="new_password"
            class="block mb-2 text-sm font-medium text-white"
            >New Password</label
          >
          <input
            type="password"
            name="new_password"
            id="new_password"
            placeholder="••••••••"
            class="{{
                new_password?.errors?.['required'] && new_password?.touched || new_password?.errors?.['minlength'] || new_password?.errors?.['pattern'] ? 'border-red-500' : 'border-gray-600'
              }} border-2 text-sm rounded-lg block w-full p-2.5 bg-gray-700 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"
            formControlName="new_password"
          />
          <div
            *ngIf="new_password?.errors?.['required'] && new_password?.touched || new_password?.errors?.['minlength'] || new_password?.errors?.['pattern']"
            class="flex text-sm text-rose-500"
            role="alert"
          >
            <svg
              class="flex-shrink-0 block w-3 h-3 mt-1 ml-1 me-2"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
              />
            </svg>
            <span
              [hidden]="!(new_password?.errors?.['required'] && new_password?.touched)"
              class="font-medium"
              >Password cannot be empty.</span
            >
            <span
              [hidden]="!(new_password?.errors?.['minlength'])"
              class="font-medium"
              >Password must have a minimum length of 8</span
            >
            <span
              [hidden]="!(!new_password?.hasError('minlength') && new_password?.errors?.['pattern'])"
              class="font-medium"
              >Password must have atleast 1 alphabet or digit</span
            >
          </div>
          <p class="text-xs font-extralight text-white p-1">
            Must contain 8+ characters, including at least 1 letter and 1
            number.
          </p>
        </div>

        <div>
          <label
            for="confirm_password"
            class="block mb-2 text-sm font-medium text-white"
            >Confirm password</label
          >
          <input
            type="password"
            name="confirm_password"
            id="confirm_password"
            placeholder="••••••••"
            class="{{
                confirm_password?.errors?.['required'] && confirm_password?.touched ? 'border-red-600' : 'border-gray-600'
              }} border-2 text-sm rounded-lg block w-full p-2.5 bg-gray-700 placeholder-gray-400 text-white"
            formControlName="confirm_password"
          />
          <div
            *ngIf="confirm_password?.errors?.['required'] && confirm_password?.touched || confirm_password?.hasError('confirmedValidator')"
            class="flex text-sm text-rose-500"
            role="alert"
          >
            <svg
              class="flex-shrink-0 block w-3 h-3 mt-1 ml-1 me-2"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
              />
            </svg>
            <span
              [hidden]="!(confirm_password?.errors?.['required'] && confirm_password?.touched)"
              class="font-medium"
              >Password cannot be empty.</span
            >
            <span
              [hidden]="!confirm_password?.hasError('confirmedValidator')"
              class="font-medium"
              >Passwords do not match.</span
            >
          </div>
        </div>
        <div class="px-24">
          <button type="submit" class="relative flex text-lg group">
            <span
              class="relative z-10 block px-5 py-3 overflow-hidden font-medium leading-tight text-gray-800 transition-colors duration-300 ease-out border-2 border-gray-900 rounded-lg group-hover:text-white"
            >
              <span
                class="absolute inset-0 w-full h-full px-5 py-3 rounded-lg bg-gray-50"
              ></span>
              <span
                class="absolute left-0 w-48 h-48 -ml-2 transition-all duration-300 origin-top-right -rotate-90 -translate-x-full translate-y-12 bg-gray-900 group-hover:-rotate-180 ease"
              ></span>
              <span class="relative">Reset Password</span>
            </span>
            <span
              class="absolute bottom-0 right-0 w-full h-12 -mb-1 -mr-1 transition-all duration-200 ease-linear bg-gray-900 rounded-lg group-hover:mb-0 group-hover:mr-0"
              data-rounded="rounded-lg"
            ></span>
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
